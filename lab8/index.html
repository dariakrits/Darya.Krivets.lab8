<!DOCTYPE html>
<html>
<head>
    <title>lab8</title>
    <meta charset='UTF-8' />
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>
 <body>
  <form name="search">
 </form>
<form name="saveadd">
       <input type="button" name="add" value="Добавить элемент"  /><br>
       <input type="button" name="save" value="Сохранить" />
</form>
  <div id="printBlock"></div>
</body>

<script>

var keyBox1 = document.search.firstKey;
var keyBox2 = document.search.secondKey;
var addBox = document.saveadd.add;
var saveBox = document.saveadd.save;
var counter=0;

function change(e){
  printBlock.textContent=null;
  if (counter<=1) {
    printBlock.textContent += "{\u0022"+document.search.firstKey.value+"\u0022";
    printBlock.textContent += ":\u0022"+document.search.secondKey.value+"\u0022}";
  }

  else {
    printBlock.textContent = "{";
    i=0;
    while (i<+counter) {
      printBlock.textContent += "\u0022"+document.search.firstKey[i].value+"\u0022";
      printBlock.textContent += ":\u0022"+document.search.secondKey[i].value+"\u0022";
      i++;
      if (i!=counter) {
        printBlock.textContent += ",";
      }
    }
    printBlock.textContent += "}";
  }


function add(){
    counter = counter+1;
    var nodet = document.createElement('tr');
    var node = document.createElement('td');
    node.innerHTML =  "<input type='text' name='firstKey'>";
    node.innerHTML += "<input type='text' name='secondKey'>";
    node.innerHTML += "<input type='button' name='up' value='↑' onClick=strUp(this)>";
    node.innerHTML += "<input type='button' name='down' value='↓' onClick=strDown(this)>";
    node.innerHTML += "<input type='button' name='del' value='X' onClick=strDelete(this) >"  ;
    document.search.appendChild(nodet);
    nodet.appendChild(node);
  }
  window.onload = add;
  printBox.onclick = change;
  addBox.onclick = add;
}

function strUp(o){
  var a1, a2, b1, b2,now, next, p3;
  now = o.parentNode.parentNode;
  next = now.previousSibling;
  if (next!=null) {
    a1 = now.children[0].children[0].value;
    a2 = now.children[0].children[1].value;
    b1 = next.children[0].children[0].value;
    b2 = next.children[0].children[1].value;
    now.children[0].children[0].value=b1;
    now.children[0].children[1].value=b2;
    next.children[0].children[0].value=a1;
    next.children[0].children[1].value=a2;
  }
}

function strDown(o){
  var a1, a2, b1, b2,now, next, p3;

  now = o.parentNode.parentNode;
  next = now.nextSibling;
  if (next!=null) {
    a1 = now.children[0].children[0].value;
    a2 = now.children[0].children[1].value;
    b1 = next.children[0].children[0].value;
    b2 = next.children[0].children[1].value;
    now.children[0].children[0].value=b1;
    now.children[0].children[1].value=b2;
    next.children[0].children[0].value=a1;
    next.children[0].children[1].value=a2;
  }
}

function strDelete(o){ 
  counter--;
  o.parentNode.remove();
}
</script>
</html>
